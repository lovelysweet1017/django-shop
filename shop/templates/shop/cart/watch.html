{% load i18n static sekizai_tags %}

{% addtoblock "js" %}<script src="{% static 'shop/js/cart.js' %}" type="text/javascript"></script>{% endaddtoblock %}
{% add_data "ng-requires" "django.shop.cart" %}

{% block shop-watch-table %}
<table shop-cart="{% url 'shop:watch-list' %}" class="table table-hover">
	{% block shop-watch-thead %}
	<thead ng-if="cart.items.length>0">
		<tr>
			<th class="w-50 text-center">{% trans "Product" %}</th>
			<th class="text-right">{% trans "Unit Price" %}</th>
			<th></th>
		</tr>
	</thead>
	{% endblock shop-watch-thead %}

	{% block shop-watch-tbody %}
	<tbody>
		<tr shop-cart-item ng-repeat="cart_item in cart.items" ng-init="cart_item.quantity=1">
		{% block shop-watch-item %}
			<td ng-bind-html="cart_item.summary.media">
				{# rendered by ProductSerializer using template "(myshop|shop)/products/watch-<product_model>-media.html" #}
			</td>
			<td class="text-right text-nowrap" ng-bind="cart_item.summary.price"></td>
			<td>
				<button type="button" class="btn btn-sm btn-secondary btn-block" ng-click="deleteWatchItem(cart_item)">
					<span class="fa fa-trash-o"></span>&nbsp;{% trans "Remove" %}
				</button>
				<button type="button" class="btn btn-sm btn-info btn-block" ng-click="addWatchItem(cart_item)">
					<span class="fa fa-cart-arrow-down"></span>&nbsp;{% trans "Add to cart" %}
				</button>
			</td>
		{% endblock shop-watch-item %}
		</tr>
	</tbody>
	{% endblock shop-watch-tbody %}

	{% block shop-watch-tfoot %}
	<tfoot>
		<tr>
			<td colspan="3">
				<div ng-if="cart.items.length===0" ng-cloak>
					<div class="text-muted mb-3">{% trans "You are perfectly happy!" %}</div>
				</div>
			</td>
		</tr>
	</tfoot>
	{% endblock %}
</table>
{% endblock shop-watch-table %}
